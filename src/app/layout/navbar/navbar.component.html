<nav
  [ngClass]="[
    isDarkTheme
      ? 'navbar-dark bg-dark border-light'
      : 'navbar-light bg-light border-dark',
    'navbar px-4 d-flex flex-column flex-md-row justify-content-between align-items-center border-top border-opacity-25 sticky-top gap-2 gap-md-0'
  ]"
  style="border-style: dotted"
>
  <!-- Left: Logo -->
  <div class="d-flex align-items-center gap-3">
    <a [routerLink]="['/welcome']">
      <img
        [src]="
          isDarkTheme
            ? 'https://druxui.s3.ap-south-1.amazonaws.com/just-logo-dark.png'
            : 'https://druxui.s3.ap-south-1.amazonaws.com/just-logo.png'
        "
        alt="Drux Logo"
        width="36"
        height="36"
        class="rounded"
      />
    </a>
    <a [routerLink]="['/welcome']" class="navbar-brand mb-0 h1">
      Drux UI - Angular
    </a>
  </div>

  <div class="position-relative w-50" #searchContainer>
    <!-- Search Input with padding to allow space for custom button -->
    <input
      class="form-control"
      type="search"
      placeholder="Search components..."
      aria-label="Search"
      (input)="onSearch($event)"
      [value]="searchQuery"
      #searchInput
      style="padding-right: 30px"
    />

    <!-- Custom Clear Button (Only shows when searchQuery is not empty) -->
    <button
      *ngIf="searchQuery.length > 0"
      class="position-absolute top-0 end-0 my-1 mx-2 btn btn-sm p-0 border-0"
      (click)="clearSearch()"
      aria-label="Clear search"
      style="z-index: 2; color: #dc3545; font-size: 1.2rem"
    >
      <i class="bi bi-x-circle"></i>
      <!-- Bootstrap icon for a red "X" -->
    </button>

    <!-- Keyboard Shortcut Badge -->
    <span
      class="d-none d-md-inline position-absolute top-0 end-0 my-1 mx-4 badge bg-transparent fw-light fs-6 text-dark"
    >
      Ctrl/âŒ˜ + K
    </span>

    <!-- Dropdown of filtered components -->
    <div
      class="position-absolute shadow-sm rounded mt-1 z-3 w-100 hide-scrollbar"
      *ngIf="filteredComponents.length > 0"
      style="max-height: 300px; overflow-y: auto"
      [ngClass]="isDarkTheme ? 'bg-dark text-white' : 'bg-white text-dark'"
    >
      <ul class="list-group list-group-flush">
        <li
          class="list-group-item list-group-item-action"
          *ngFor="let comp of filteredComponents"
          [routerLink]="comp.route"
          (click)="clearSearch()"
        >
          {{ comp.name }}
        </li>
      </ul>
    </div>
  </div>

  <style>
    input[type="search"]::-webkit-search-cancel-button {
      display: none !important;
    }
    input[type="search"]::-moz-search-cancel-button {
      display: none !important;
    }
    input[type="search"]::-ms-clear {
      display: none !important;
    }
  </style>

  <div class="d-flex align-items-center gap-3">
    <!-- GitHub Link -->
    <a
      href="https://github.com/Shreesha99"
      target="_blank"
      [ngClass]="isDarkTheme ? 'text-white' : 'text-dark'"
    >
      <i class="bi bi-github fs-5"></i>
    </a>

    <!-- Email Link -->
    <a
      href="mailto:youremail@example.com"
      [ngClass]="isDarkTheme ? 'text-white' : 'text-dark'"
    >
      <i class="bi bi-envelope fs-5"></i>
    </a>

    <!-- Theme Toggle Button -->
    <button
      (click)="toggleTheme()"
      class="btn btn-sm p-0 border-0"
      aria-label="Toggle Theme"
    >
      <i
        class="bi fs-5 transition"
        [ngClass]="{
          'bi-sun': isDarkTheme,
          'bi-moon': !isDarkTheme,
          'text-white': isDarkTheme,
          'text-dark': !isDarkTheme
        }"
      >
      </i>
    </button>
  </div>
</nav>
